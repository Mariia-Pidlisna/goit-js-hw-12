{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.svg","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\n\nconst API_KEY = \"49639271-38d2af22ba8dd6f27b20ef155\";\nconst limit = 15;\n\nexport async function getImagesByQuery(query, page) {\n       \n\n  const response = await axios.get(\"https://pixabay.com/api/\", {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      page: page,\n      per_page: limit,\n    },\n    \n  });\n\n  return response.data;\n}\n\n\n\n\n\n\n    \n","\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst fetchGalleryBtn = document.querySelector(\".gallery-button\");\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"152\" />\n          </a>\n          <ul class=\"gallery-info\">\n            <li class=\"gallery-info-item\"><b>Likes</b> ${likes}</li>\n            <li class=\"gallery-info-item\"><b>Views</b> ${views}</li>\n            <li class=\"gallery-info-item\"><b>Comments</b> ${comments}</li>\n            <li class=\"gallery-info-item\"><b>Downloads</b> ${downloads}</li>\n          </ul>\n        </li>\n      `\n    )\n    .join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh(); \n}\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.classList.remove(\"is-hidden\");\n}\n\nexport function hideLoader() {\n  loader.classList.add(\"is-hidden\");\n}\n\nexport function showLoadMoreButton() {\n  fetchGalleryBtn.classList.remove(\"is-hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  fetchGalleryBtn.classList.add(\"is-hidden\");\n}","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='none'%3e%3cpath%20fill='%23FAFAFB'%20d='M6.81.219A.75.75%200%200%201%207.34%200h9.32a.75.75%200%200%201%20.53.219l6.591%206.591a.75.75%200%200%201%20.219.53v9.32a.75.75%200%200%201-.219.53l-6.591%206.591a.75.75%200%200%201-.53.219H7.34a.75.75%200%200%201-.53-.219L.219%2017.19A.75.75%200%200%201%200%2016.66V7.34a.75.75%200%200%201%20.219-.53L6.81.219ZM7.65%201.5%201.5%207.65v8.7l6.15%206.15h8.7l6.15-6.15v-8.7L16.35%201.5h-8.7Z'/%3e%3cpath%20fill='%23FAFAFB'%20d='M6.969%206.969a.75.75%200%200%201%201.062%200L12%2010.939l3.969-3.97a.75.75%200%201%201%201.062%201.062L13.061%2012l3.97%203.969a.752.752%200%200%201-1.062%201.062L12%2013.061l-3.969%203.97a.752.752%200%200%201-1.282-.531.751.751%200%200%201%20.22-.531L10.939%2012%206.97%208.031a.75.75%200%200%201%200-1.062Z'/%3e%3c/svg%3e\"","\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton\n} from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport iconError from \"./img/error.svg\"\n\n\nconst form = document.querySelector(\".form\");\nconst fetchGalleryBtn = document.querySelector(\".gallery-button\");\n\nlet curentPage = 1;\nlet curentQuery = \"\";\n\nform.addEventListener(\"submit\", async event => {\n  event.preventDefault();\n\n  const query = event.target.elements[\"search-text\"].value.trim().toLowerCase();\n\n  if (query === \"\") {\n    iziToast.error({\n      message: \"Please enter a search query.\",\n      position: \"topRight\",\n      backgroundColor: \"#ef4040\",\n      titleColor: \"#fff\",\n      messageColor: \"#fff\",\n      class: \"error-icon\",\n      iconUrl: iconError,\n    });\n    return;\n  } \n  if(query !== curentQuery) {\n    curentQuery = query;\n    curentPage = 1;\n    clearGallery();\n    hideLoadMoreButton();\n  }\n\n  await fetchImages(true);\n  form.reset();\n\n}); \n\nfetchGalleryBtn.addEventListener(\"click\", async () => {\n    await fetchImages();\n});\n\n  async function fetchImages(isFirstLoad = false) {\n    showLoader();\n \n    try {\n        const userGetImages = await getImagesByQuery(curentQuery, curentPage);\n        \n     \n        if (userGetImages.hits.length === 0 && isFirstLoad) {\n          iziToast.error({\n            message: \"Sorry, there are no images matching<br/> your search query. Please try again!\",\n            position: \"topRight\",\n            backgroundColor: \"#ef4040\",\n            titleColor: \"#fff\",\n            messageColor: \"#fff\",\n            class: \"error-icon\",\n            iconUrl: iconError,\n          });\n          return;\n        }\n  \n    createGallery(userGetImages.hits);\n    curentPage++;\n    \n    if(!isFirstLoad) {\n    const firstCard = document.querySelector(\".gallery .gallery-item\");\nif (firstCard) {\n  const cardHeight = firstCard.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n}\n    }\n    \nif(userGetImages.hits.length === 15) {\n    showLoadMoreButton();\n    showLoader();\n} else {\n    hideLoadMoreButton()\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    hideLoader();\n  }\n        \n      } catch (error) {\n        iziToast.error({\n          message: \"Something went wrong. Please try again later!\",\n          position: \"topRight\",\n          backgroundColor: \"#ef4040\",\n          titleColor: \"#fff\",\n          messageColor: \"#fff\",\n          class: \"error-icon\",\n          iconUrl: iconError,\n        });\n         \n      } finally {\n        hideLoader();\n      }\n    }\n\n  \n"],"names":["API_KEY","limit","getImagesByQuery","query","page","axios","gallery","loader","fetchGalleryBtn","lightbox","SimpleLightbox","createGallery","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","iconError","form","curentPage","curentQuery","event","iziToast","fetchImages","isFirstLoad","userGetImages","firstCard","cardHeight"],"mappings":"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"}